# =====================================
# AI2Text ASR Microservices Environment
# =====================================

# Messaging / Event Bus (NATS)
NATS_URL=nats://nats:4222

# Object Storage (MinIO in dev; use S3 in prod)
MINIO_ENDPOINT=http://minio:9000
MINIO_ACCESS_KEY=minio
MINIO_SECRET_KEY=minio123
BUCKET=audio

# Metadata Database (PostgreSQL)
DATABASE_URL=postgresql://postgres:postgres@postgres:5432/asrmeta
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=asrmeta

# Vector Database (Qdrant)
QDRANT_URL=http://qdrant:6333

# API Gateway Configuration
JWT_PUBLIC_KEY=dev
JWT_ALGO=HS256  # Use RS256 in production with proper key management
RATE_LIMIT_PER_MINUTE=60

# Service URLs (for gateway routing)
INGESTION_URL=http://ingestion:8001
METADATA_URL=http://metadata:8002
ASR_URL=http://asr:8003
NLP_POST_URL=http://nlp-post:8004
EMBEDDINGS_URL=http://embeddings:8005
SEARCH_URL=http://search:8006

# ASR Configuration
ASR_PARTIAL_INTERVAL_MS=400
ASR_MODEL_PATH=/app/checkpoints/best_model.pt
ASR_MODEL_TYPE=lstm  # Options: lstm, conformer, fast_conformer

# NLP Post-processing Configuration
NLP_MODEL_PATH=/app/models/viet_diacritics.model
ENABLE_DIACRITICS_RESTORATION=true
ENABLE_TYPO_CORRECTION=true

# Embeddings Configuration
EMBEDDING_MODEL_TYPE=word2vec  # Options: word2vec, phon2vec, transformer
EMBEDDING_DIM=768
WORD2VEC_MODEL_PATH=/app/models/word2vec.model
PHON2VEC_MODEL_PATH=/app/models/phon2vec.model

# --- Ingestion watcher (auto-grab wav/mp3) ---
INBOX_PATH=/mnt/inbox
S3_INBOX_PREFIX=audio/inbox/
INGEST_SCAN_INTERVAL_SEC=30
AUDIO_BUCKET=audio
TRANSCRIPT_BUCKET=transcripts

# --- Datasets & models locations ---
DATASET_BUCKET=datasets
MODELS_BUCKET=models

# --- Auto-training triggers ---
TRAIN_HOURS_THRESHOLD=5.0
TRAIN_DAILY_CRON=02:00

# Observability (Optional - OpenTelemetry)
OTEL_ENABLED=false
OTEL_EXPORTER_OTLP_ENDPOINT=http://jaeger:4318
OTEL_SERVICE_NAME=ai2text-asr

# Development Settings
LOG_LEVEL=INFO
DEBUG=false
PYTHONUNBUFFERED=1

